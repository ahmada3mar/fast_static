import{l as w,V as m,E as g,W as _,X as b,r as h,e as M,Y as O,Z as S}from"./XQ5clRp_.js";const z=b?window:void 0;function v(e){var t;const r=m(e);return(t=r==null?void 0:r.$el)!=null?t:r}function E(){const e=h(!1),t=O();return t&&M(()=>{e.value=!0},t),e}function C(e){const t=E();return w(()=>(t.value,!!e()))}function W(e,t,r={}){const{window:c=z,...a}=r;let u;const d=C(()=>c&&"ResizeObserver"in c),o=()=>{u&&(u.disconnect(),u=void 0)},n=w(()=>{const l=m(e);return Array.isArray(l)?l.map(p=>v(p)):[v(l)]}),s=g(n,l=>{if(o(),d.value&&c){u=new ResizeObserver(t);for(const p of l)p&&u.observe(p,a)}},{immediate:!0,flush:"post"}),i=()=>{o(),s()};return _(i),{isSupported:d,stop:i}}const f=new Map;function A(e){const t=S();function r(o){var n;const s=f.get(e)||new Set;s.add(o),f.set(e,s);const i=()=>a(o);return(n=t==null?void 0:t.cleanups)==null||n.push(i),i}function c(o){function n(...s){a(n),o(...s)}return r(n)}function a(o){const n=f.get(e);n&&(n.delete(o),n.size||u())}function u(){f.delete(e)}function d(o,n){var s;(s=f.get(e))==null||s.forEach(i=>i(o,n))}return{on:r,once:c,off:a,emit:d,reset:u}}export{W as a,A as u};
